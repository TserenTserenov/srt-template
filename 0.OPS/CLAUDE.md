# Инструкции для Claude Code

Этот документ содержит руководство по работе с Claude Code в контексте S2R/SRR и интеграции с First Principles Framework (FPF).

**Терминология:**
- **S2R** — имя метода (бренд)
- **SRR** — Systems–Roles Repository (формальная расшифровка)
- **S2R Template** — этот репозиторий (шаблон SRR)

## Архитектура контекста

При каждом запросе Claude получает:
1. **Системный промпт** — базовые инструкции
2. **CLAUDE.md** (~3K токенов) — этот файл с терминологией и принципами
3. **История диалога** — предыдущие сообщения
4. **Текущий запрос** — задача пользователя

## Интеграция с FPF

### Что такое FPF?

**First Principles Framework** — это "операционная система для мышления", архитектура трансдисциплинарного рассуждения. FPF не методология, а **эпистема метода** — структурированная спецификация того, как думать.

### Принцип терминологии

> **ВАЖНО:** Основные термины S2R берутся из FPF и системного мышления. При использовании терминов следуй канонической терминологии FPF.

### Ключевые концепции FPF

| Концепция | Паттерн | Описание |
|-----------|---------|----------|
| **Холонический фундамент** | A.1 | Всё — холон: одновременно целое и часть |
| **Ограниченный контекст** | A.1.1 | Значение локально. Термин определён в границах контекста |
| **Строгое различение** | A.7 | Роль ≠ Метод ≠ Работа. Описание ≠ Объект |
| **F-G-R доверие** | B.3 | Доверие = (Формальность, Область применения, Надёжность) |
| **Цикл ADI** | B.5 | Абдукция → Дедукция → Индукция |
| **NQD-поиск** | C.18 | Новизна-Качество-Разнообразие |

### Файлы FPF в репозитории

```
.fpf/
├── INDEX.md          # Индекс принципов проекта (~250 строк)
├── FPF-Spec.md       # Полная спецификация FPF (~43K строк)
└── FPF-Readme.md     # Обзор фреймворка
```

## Архитектура SRR с ядрами

### Концепция ядер (Kernels)

SRR организует знания через **ядра**. Каждое ядро — это полная системная перспектива с 9 семействами документов.

- **Ядро A** — всегда относительно **главной целевой системы**
- **Ядра B, C, D...** — относительно **"наших систем"**

### "Наши системы" (Our Systems)

"Наши системы" могут быть:
- **Подсистемами целевой системы** — компоненты внутри SoI
- **Частями цепочки создания** — системы, создающие/поддерживающие целевую

### Матрица 3×3 внутри каждого ядра

```
                     Предприниматель    Инженер           Менеджер
                     (Meaning)          (Architecture)    (Operations)
┌────────────────────────────────────────────────────────────────────────┐
│ X1. Suprasystem    FX1                FX2               FX3            │
│     (Надсистема)   Контекст           Окружение         Взаимодействие │
├────────────────────────────────────────────────────────────────────────┤
│ X2. System-of-Int. FX4                FX5               FX6            │
│     (Целевая сист) Требования         Архитектура       Реализация     │
├────────────────────────────────────────────────────────────────────────┤
│ X3. Constructor    FX7                FX8               FX9            │
│     (Создатель)    Принципы           Платформа         Команда        │
└────────────────────────────────────────────────────────────────────────┘

где X = буква ядра (A, B, C...)
```

**Терминология систем (FPF):**
| Русский термин | Английский термин (FPF) | Сокращение |
|----------------|------------------------|------------|
| Надсистема | Suprasystem (= Supersystem) | — |
| Целевая система | System-of-Interest (= Target System) | SoI |
| Система создания | Constructor (= Constructor System) | — |

### Навигация по папкам

| Путь | Описание |
|------|----------|
| `0.OPS/` | F0: Метаэпистема хранилища |
| `A.SOI-Name/` | Ядро A: Целевая система (шаблон) |
| `B.Our-System-Name/` | Ядро B: Шаблон для "нашей системы" |

### Структура ядра

```
X.Kernel-Name/
├── X0.Kernel-Management/           # FX0: Управление ядром (опционально)
│   └── local-ontology.md           # Локальные термины ядра
├── X1.Suprasystem/                 # Надсистема
│   ├── X1.1.Meaning/               # FX1
│   ├── X1.2.Architecture/          # FX2
│   └── X1.3.Operations/            # FX3
├── X2.System-of-Interest/          # Целевая система ядра
│   ├── X2.1.Meaning/               # FX4
│   ├── X2.2.Architecture/          # FX5
│   └── X2.3.Operations/            # FX6
└── X3.Constructor/                 # Система создания
    ├── X3.1.Meaning/               # FX7
    ├── X3.2.Architecture/          # FX8
    └── X3.3.Operations/            # FX9
```

### Роли (измерения)

| Роль | Подпапка | Вопрос | Фокус |
|------|----------|--------|-------|
| **Предприниматель** | X.1.Meaning/ | Зачем? | Ценность, смысл |
| **Инженер** | X.2.Architecture/ | Как устроено? | Структура |
| **Менеджер** | X.3.Operations/ | Как работает? | Процессы |

## ОБЯЗАТЕЛЬНО: Работа с 0.OPS/

> **КРИТИЧЕСКИ ВАЖНО:** Создание любого документа хранилища происходит **обязательно** на основании документов из папки `0.OPS/`.

### Источники истины для создания документов

| Задача | Обязательные источники |
|--------|------------------------|
| **Создание документа** | `0.1.Knowledge-Logic/document-families.md`, `0.2.Repository-Processes/standards.md` |
| **Определение ядра** | `0.1.Knowledge-Logic/kernels-model.md` |
| **Карта систем** | `0.1.Knowledge-Logic/our-systems-map.md` |
| **Терминология** | `0.1.Knowledge-Logic/ontology.md`, `0.1.Knowledge-Logic/glossary.md` |
| **Связи ядер** | `0.3.Kernels-Bridge/value-chain.md` |

### Алгоритм перед созданием документа

1. **Определи ЯДРО** — о какой системе документ? (A, B, C...)
2. **Определи СЕМЕЙСТВО** — система × роль (FX1-FX9)
3. **Прочитай стандарты** — `0.2.Repository-Processes/standards.md`
4. **Создай документ** с правильным frontmatter в правильной папке
5. **Обнови связи** — при необходимости

### Структура 0.OPS/ (F0)

```
0.OPS/
├── 0.1.Knowledge-Logic/           # Онтология и модель знаний
│   ├── 00-readme.md
│   ├── 01-kernels-model.md        # ⭐ Модель ядер
│   ├── 02-document-families.md    # ⭐ Модель семейств F1-F9
│   ├── 03-our-systems-map.md      # ⭐ Карта "наших систем"
│   ├── 04-ontology.md             # Общая онтология
│   ├── 05-glossary.md             # Глоссарий
│   ├── 06-taxonomy.md             # Таксономия
│   └── 07-naming.md               # Соглашения об именовании
├── 0.2.Repository-Processes/      # Процессы и стандарты
│   ├── 01-project-description-template.md  # ⭐ Шаблон описания проекта
│   ├── 02-standards.md            # ⭐ Стандарты оформления
│   ├── 03-structure.md            # Структура папок
│   ├── 04-document-creation.md    # Создание документов
│   ├── 05-frontmatter-spec.md     # Спецификация метаданных
│   ├── 06-workflows.md            # Рабочие процессы
│   └── 07-roles.md                # Роли и ответственность
├── 0.3.Kernels-Bridge/            # Связи между ядрами
│   ├── 01-value-chain.md          # ⭐ Цепочка ценности
│   ├── 02-kernels-relations.md    # Матрица связей
│   └── 03-systems-hierarchy.md    # Иерархия систем
├── 0.4.Plans-and-Meetings/        # Планирование
├── 0.5.AI-Reports/                # Автоотчёты AI
├── 0.9.Inbox/                     # Входящие идеи
└── 0.99.Archive/                  # Архив
```

## Работа с документами

### Обязательные метаданные (YAML frontmatter)

```yaml
---
type: doc                        # doc, spec, process, report, template
status: active                   # stub, draft, active, archived
created: 2026-01-14
updated: 2026-01-14
kernel: A                        # A, B, C...
family: FA4                      # FA1-FA9, FB1-FB9...
system: System-of-Interest       # Suprasystem, System-of-Interest, Constructor
role: Meaning                    # Meaning, Architecture, Operations
---
```

### Размещение документа

```
{Kernel}.{Kernel-Name}/{System}/{Role}/document-name.md
```

Примеры:
- `A.Target-System/A2.System-of-Interest/A2.1.Meaning/requirements.md`
- `B.Our-System/B3.Constructor/B3.3.Operations/team-structure.md`

## КРИТИЧЕСКИЕ ПРАВИЛА multi-kernel S2R

> **ОБЯЗАТЕЛЬНО:** Перед созданием ядер или структуры — проверь эти правила.

### Правило 1: Система ≠ Эпистема

| Концепт | Определение | Может быть ядром? |
|---------|-------------|-------------------|
| **Система** | Сущность с границей, входами/выходами, ролями, жизненным циклом | ✅ Да |
| **Эпистема** | Область знания/описания (экономика, маркетинг, метрики, обучение) | ❌ Нет |

**ЗАПРЕТ:** Не предлагать ядра по названиям эпистем:
- ❌ `E.Экономика/`, `G.Продвижение/`, `H.Монетизация/`, `I.Обучение/`

**ПРАВИЛО:** Эпистемы — это разделы внутри документов F1-F9, а не отдельные ядра.

### Правило 2: Фиксированная нумерация X1/X2/X3

```
X1 = Надсистема (физическая вложенность, НЕ эпистемическая)
X2 = Наша система данного ядра (SoI)
X3 = Система создания X2 (создатель/развитие нашей системы)
```

**ЗАПРЕТ для X3:**
- ❌ "Каталог подсистем"
- ❌ "Структура"
- ❌ "Состав"
- ❌ "Обзор"

**СЛЕДСТВИЕ:** Состав системы описывается в X2 (в документах FX4/FX5), а НЕ в X3.

### Правило 3: Лексические ограничения

| Запрещено | Почему | Использовать вместо |
|-----------|--------|---------------------|
| "Контур" | Размывает понятие системы | "Система", "Подсистема" |
| "Правила как система" | Правила ≠ Система | "Процесс", "Стандарт" |
| "Процесс как ядро" | Процесс ≠ Система | Описать в F6/F9 |

### Правило 4: Чеклист перед созданием нового ядра

Новое ядро можно создать **только если ВСЕ пункты выполнены**:

- [ ] Есть **владелец/роль** — кто отвечает за систему?
- [ ] Есть **вход/выход** — что принимает и что выдаёт?
- [ ] Есть **граница** — что система НЕ делает?
- [ ] Есть **собственный цикл изменений** — планы/релизы?
- [ ] Это **НЕ эпистема** — не "экономика", "маркетинг" и т.п.?

Если хотя бы один пункт не выполнен → это НЕ ядро, а раздел документа или подсистема.

### Правило 5: Формат ответов при работе с ядрами

1. **Сначала:** Напомнить фиксированные правила (X2/X3, система≠эпистема)
2. **Затем:** Дать 1 экран структуры/решения
3. **Затем:** Запросить только недостающие определения (обычно: что такое X3)

### Правило 6: Описание частей и стыков

| Что описываем | Где описывать | Пример |
|---------------|---------------|--------|
| Подсистемы целого | В X2 родительской системы | B2: роль подсистем в Экосистеме |
| Устройство подсистемы | В X2 подсистемы (отдельное ядро) | C2: устройство Приложения |
| Стыки между системами | Реестр интерфейсов (`0.OPS/Index`) и F3 | Интеграция B↔C |

---

## Принципы работы Claude

### 1. Холонический подход (A.1)

- Рассматривай каждый документ как часть большей системы
- Указывай связи через `related` в frontmatter
- Поддерживай двунаправленность связей

### 2. Ограниченные контексты (A.1.1)

- Каждое ядро — отдельный контекст со своей терминологией
- При переносе концепций между ядрами — явно указывай
- Локальные термины ядра — в `X0.Kernel-Management/local-ontology.md`

### 3. Строгое различение (A.7)

| Путаница | Правильно |
|----------|-----------|
| Документ "делает" | Система делает, документ описывает |
| Роль = Человек | Роль — функция, Человек — исполнитель |
| План = Реальность | План — WorkPlan, Реальность — Work |

### 4. Инкрементальное развитие

- Маленькие изменения > большие рефакторинги
- Проверяй влияние на связанные документы
- Обновляй `updated` в frontmatter

## Команды для работы

### Определение ядра и семейства

```
В какое ядро и семейство входит документ про [тема]?
```

### Создание документа

```
Создай документ в ядре [X] семейство [FXN] на тему [Topic]
```

### Анализ структуры

```
Покажи заполненность ядра [X]:
- Какие семейства заполнены?
- Какие пусты?
```

### Добавление нового ядра

```
Создай новое ядро [C] для системы [название]:
1. Создай структуру папок
2. Создай README
3. Обнови our-systems-map.md
4. Обнови value-chain.md
```

## Ссылки

### Ключевые документы
- [README.md](README.md) — описание S2R
- [0.OPS/0.1.Knowledge-Logic/kernels-model.md](0.OPS/0.1.Knowledge-Logic/kernels-model.md) — модель ядер
- [0.OPS/0.1.Knowledge-Logic/document-families.md](0.OPS/0.1.Knowledge-Logic/document-families.md) — семейства F1-F9

### F0 (Repository Management)
- [0.OPS/0.1.Knowledge-Logic/ontology.md](0.OPS/0.1.Knowledge-Logic/ontology.md) — онтология
- [0.OPS/0.2.Repository-Processes/standards.md](0.OPS/0.2.Repository-Processes/standards.md) — стандарты
- [0.OPS/0.3.Kernels-Bridge/value-chain.md](0.OPS/0.3.Kernels-Bridge/value-chain.md) — цепочка ценности

### FPF
- [.fpf/INDEX.md](.fpf/INDEX.md) — локальные принципы проекта
- [.fpf/FPF-Spec.md](.fpf/FPF-Spec.md) — полная спецификация FPF
