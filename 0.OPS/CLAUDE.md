# Инструкции для Claude Code

Этот документ содержит руководство по работе с Claude Code в контексте S2R/SRR.

**Терминология:**
- **S2R** — имя метода (бренд)
- **SRR** — Systems–Roles Repository (формальная расшифровка)
- **S2R Template** — этот репозиторий (шаблон SRR)

---

## Часть 1: ЯДРА (Kernels)

> **Первый шаг:** Определить структуру ядер проекта.

### Что такое ядро?

**Ядро** — это полная системная перспектива относительно одной целевой системы. Каждое ядро содержит 9 семейств документов (F1-F9).

- **Ядро A** — всегда относительно **главной целевой системы проекта**
- **Ядра B, C, D...** — относительно **"наших систем"**

### "Наши системы" (Our Systems)

"Наши системы" могут быть:
- **Подсистемами целевой системы** — компоненты внутри SoI
- **Частями цепочки создания** — системы, создающие/поддерживающие целевую

### Терминология систем

| Русский термин | Английский термин (FPF) | Сокращение |
|----------------|------------------------|------------|
| Надсистема | Suprasystem (= Supersystem) | — |
| Целевая система | System-of-Interest (= Target System) | SoI |
| Система создания | Constructor (= Constructor System) | — |

### Структура ядра

```
X.Kernel-Name/
├── X0.Kernel-Management/           # FX0: Управление ядром (опционально)
│   └── local-ontology.md           # Локальные термины ядра
├── X1.Suprasystem/                 # Надсистема
│   ├── X1.1.Meaning/               # FX1
│   ├── X1.2.Architecture/          # FX2
│   └── X1.3.Operations/            # FX3
├── X2.System-of-Interest/          # Целевая система ядра
│   ├── X2.1.Meaning/               # FX4
│   ├── X2.2.Architecture/          # FX5
│   └── X2.3.Operations/            # FX6
└── X3.Constructor/                 # Система создания
    ├── X3.1.Meaning/               # FX7
    ├── X3.2.Architecture/          # FX8
    └── X3.3.Operations/            # FX9
```

### КРИТИЧЕСКИЕ ПРАВИЛА создания ядер

#### Правило 1: Система ≠ Эпистема

| Концепт | Определение | Может быть ядром? |
|---------|-------------|-------------------|
| **Система** | Сущность с границей, входами/выходами, ролями, жизненным циклом | ✅ Да |
| **Эпистема** | Область знания/описания (экономика, маркетинг, метрики, обучение) | ❌ Нет |

**ЗАПРЕТ:** Не предлагать ядра по названиям эпистем:
- ❌ `E.Экономика/`, `G.Продвижение/`, `H.Монетизация/`, `I.Обучение/`

**ПРАВИЛО:** Эпистемы — это разделы внутри документов F1-F9, а не отдельные ядра.

#### Правило 2: Фиксированная нумерация X1/X2/X3

```
X1 = Надсистема (физическая вложенность, НЕ эпистемическая)
X2 = Наша система данного ядра (SoI)
X3 = Система создания X2 (создатель/развитие нашей системы)
```

**ЗАПРЕТ для X3:**
- ❌ "Каталог подсистем"
- ❌ "Структура"
- ❌ "Состав"
- ❌ "Обзор"

**СЛЕДСТВИЕ:** Состав системы описывается в X2 (в документах FX4/FX5), а НЕ в X3.

#### Правило 3: Лексические ограничения

| Запрещено | Почему | Использовать вместо |
|-----------|--------|---------------------|
| "Контур" | Размывает понятие системы | "Система", "Подсистема" |
| "Правила как система" | Правила ≠ Система | "Процесс", "Стандарт" |
| "Процесс как ядро" | Процесс ≠ Система | Описать в F6/F9 |

#### Правило 4: Чеклист перед созданием ядра

Новое ядро можно создать **только если ВСЕ пункты выполнены**:

- [ ] Есть **владелец/роль** — кто отвечает за систему?
- [ ] Есть **вход/выход** — что принимает и что выдаёт?
- [ ] Есть **граница** — что система НЕ делает?
- [ ] Есть **собственный цикл изменений** — планы/релизы?
- [ ] Это **НЕ эпистема** — не "экономика", "маркетинг" и т.п.?

Если хотя бы один пункт не выполнен → это НЕ ядро, а раздел документа или подсистема.

#### Правило 5: Описание частей и стыков

| Что описываем | Где описывать | Пример |
|---------------|---------------|--------|
| Подсистемы целого | В X2 родительской системы | B2: роль подсистем в Экосистеме |
| Устройство подсистемы | В X2 подсистемы (отдельное ядро) | C2: устройство Приложения |
| Стыки между системами | Реестр интерфейсов (`0.2.Kernels-Bridge/`) и F3 | Интеграция B↔C |

> **Подробнее:** [01-kernels-model.md](0.1.Knowledge-Logic/01-kernels-model.md)

---

## Часть 2: МАТРИЦА 3×3 (Роли и семейства)

> **Второй шаг:** После определения ядер — работать с матрицей ролей.

### Краткая матрица: ключевые слова

| Уровень \ Роль | Предприниматель (X.1) | Инженер (X.2) | Менеджер (X.3) |
|----------------|----------------------|---------------|----------------|
| **1.X. Надсистема** | **Спрос / Оффер** | **Сценарии / Прототип** | **Доверие / Репутация** |
| **2.X. Целевая система** | **Смысл / Границы** | **Архитектура / Интерфейсы** | **SLO / Incidents** |
| **3.X. Система создания** | **Стратегия / Инвестиции** | **CI/CD / Quality** | **Ресурсы / Регламенты** |

### Матрица ролей

| Уровень \ Роль | Предприниматель (X.1) | Инженер (X.2) | Менеджер (X.3) |
|----------------|----------------------|---------------|----------------|
| **1.X. Надсистема** | FX1: Продвиженец | FX2: Владелец продукта | FX3: PR/GR |
| **2.X. Целевая система** | FX4: Визионер ЦС | FX5: Инженер ЦС | FX6: Оператор ЦС |
| **3.X. Система создания** | FX7: Бизнесмен | FX8: Организатор разработки | FX9: Администратор |

### Роли (измерения)

| Роль | Подпапка | Вопрос | Фокус |
|------|----------|--------|-------|
| **Предприниматель** | X.1.Meaning/ | Зачем? | Ценность, смысл |
| **Инженер** | X.2.Architecture/ | Как устроено? | Структура |
| **Менеджер** | X.3.Operations/ | Как работает? | Процессы |

> **Полное описание ролей:** [roles-matrix.md](0.3.Roles-Matrix-3x3/roles-matrix.md)
>
> **Краткая версия:** [roles-matrix-brief.md](0.3.Roles-Matrix-3x3/roles-matrix-brief.md)

---

## Часть 3: FPF (First Principles Framework)

> **Третий шаг:** Использовать FPF для глубокой работы с онтологией.

### Что такое FPF?

**First Principles Framework** — это "операционная система для мышления", архитектура трансдисциплинарного рассуждения. FPF не методология, а **эпистема метода** — структурированная спецификация того, как думать.

### Принцип терминологии

> **ВАЖНО:** Основные термины S2R берутся из FPF и системного мышления. При использовании терминов следуй канонической терминологии FPF.

### Ключевые концепции FPF

| Концепция | Паттерн | Описание |
|-----------|---------|----------|
| **Холонический фундамент** | A.1 | Всё — холон: одновременно целое и часть |
| **Ограниченный контекст** | A.1.1 | Значение локально. Термин определён в границах контекста |
| **Строгое различение** | A.7 | Роль ≠ Метод ≠ Работа. Описание ≠ Объект |
| **F-G-R доверие** | B.3 | Доверие = (Формальность, Область применения, Надёжность) |
| **Цикл ADI** | B.5 | Абдукция → Дедукция → Индукция |
| **NQD-поиск** | C.18 | Новизна-Качество-Разнообразие |

### Файлы FPF в репозитории

```
0.OPS/0.4.FPF-Integration/
├── fpf/
│   ├── INDEX.md          # Индекс принципов проекта
│   ├── FPF-Spec.md       # Полная спецификация FPF
│   └── FPF-Readme.md     # Обзор фреймворка
├── fpf-integration.md    # Связь S2R и FPF
└── fpf-patterns-map.md   # Карта паттернов
```

### Принципы работы Claude (из FPF)

#### 1. Холонический подход (A.1)

- Рассматривай каждый документ как часть большей системы
- Указывай связи через `related` в frontmatter
- Поддерживай двунаправленность связей

#### 2. Ограниченные контексты (A.1.1)

- Каждое ядро — отдельный контекст со своей терминологией
- При переносе концепций между ядрами — явно указывай
- Локальные термины ядра — в `X0.Kernel-Management/local-ontology.md`

#### 3. Строгое различение (A.7)

| Путаница | Правильно |
|----------|-----------|
| Документ "делает" | Система делает, документ описывает |
| Роль = Человек | Роль — функция, Человек — исполнитель |
| План = Реальность | План — WorkPlan, Реальность — Work |

> **Подробнее:** [fpf-integration.md](0.4.FPF-Integration/fpf-integration.md)

---

## Часть 4: Работа с документами

### Архитектура контекста

При каждом запросе Claude получает:
1. **Системный промпт** — базовые инструкции
2. **CLAUDE.md** — этот файл с терминологией и принципами
3. **История диалога** — предыдущие сообщения
4. **Текущий запрос** — задача пользователя

### ОБЯЗАТЕЛЬНО: Работа с 0.OPS/

> **КРИТИЧЕСКИ ВАЖНО:** Создание любого документа хранилища происходит **обязательно** на основании документов из папки `0.OPS/`.

### Структура 0.OPS/ (F0)

```
0.OPS/
├── 0.1.Knowledge-Logic/           # Онтология и модель знаний
│   ├── 01-kernels-model.md        # ⭐ Модель ядер
│   ├── 02-document-families.md    # ⭐ Модель семейств F1-F9
│   ├── 03-our-systems-map.md      # ⭐ Карта "наших систем"
│   ├── 04-ontology.md             # ⭐ Общая онтология (запреты, термины)
│   ├── 05-glossary.md             # ⭐ Глоссарий терминов
│   ├── 06-taxonomy.md             # Таксономия документов
│   ├── 07-naming.md               # Соглашения об именовании
│   ├── 08-anti-patterns.md        # ⭐ Анти-паттерны (типичные ошибки)
│   └── 09-examples-library.md     # ⭐ Библиотека примеров для AI
├── 0.2.Kernels-Bridge/            # Связи между ядрами
│   ├── 01-value-chain.md          # ⭐ Цепочка ценности
│   ├── 02-kernels-relations.md    # Матрица связей
│   └── 03-systems-hierarchy.md    # Иерархия систем
├── 0.3.Roles-Matrix-3x3/          # Матрица ролей 3×3
│   ├── roles-matrix.md            # ⭐ Полная версия
│   └── roles-matrix-brief.md      # Краткая версия
├── 0.4.FPF-Integration/           # Интеграция с FPF
│   ├── fpf/                       # Спецификация FPF
│   └── fpf-integration.md         # Связь S2R и FPF
├── 0.5.AI-Reports/                # Автоотчёты AI
├── 0.6.Repository-Processes/      # Процессы и стандарты
│   ├── 01-project-description-template.md  # ⭐ Шаблон описания проекта
│   ├── 02-standards.md            # Стандарты оформления
│   ├── 03-structure.md            # Структура репозитория
│   ├── 04-document-creation.md    # Создание документов
│   ├── 05-frontmatter-spec.md     # Спецификация метаданных
│   ├── 06-workflows.md            # Рабочие процессы
│   └── 07-roles.md                # Роли и ответственность
├── 0.7.Plans-and-Meetings/        # Планирование
├── 0.9.Inbox/                     # Входящие идеи
└── 0.99.Archive/                  # Архив
```

### Алгоритм создания документа

1. **Определи ЯДРО** — о какой системе документ? (A, B, C...)
2. **Определи СЕМЕЙСТВО** — система × роль (FX1-FX9)
3. **Прочитай стандарты** — `0.6.Repository-Processes/02-standards.md`
4. **Создай документ** с правильным frontmatter в правильной папке
5. **Обнови связи** — при необходимости

### Обязательные метаданные (YAML frontmatter)

```yaml
---
type: doc                        # doc, spec, process, report, template
status: active                   # stub, draft, active, archived
created: 2026-01-14
updated: 2026-01-14
kernel: A                        # A, B, C...
family: FA4                      # FA1-FA9, FB1-FB9...
system: System-of-Interest       # Suprasystem, System-of-Interest, Constructor
role: Meaning                    # Meaning, Architecture, Operations
---
```

### Размещение документа

```
{Kernel}.{Kernel-Name}/{System}/{Role}/document-name.md
```

Примеры:
- `A.Target-System/A2.System-of-Interest/A2.1.Meaning/requirements.md`
- `B.Our-System/B3.Constructor/B3.3.Operations/team-structure.md`

---

## Команды для работы

### Определение ядра и семейства

```
В какое ядро и семейство входит документ про [тема]?
```

### Создание документа

```
Создай документ в ядре [X] семейство [FXN] на тему [Topic]
```

### Анализ структуры

```
Покажи заполненность ядра [X]:
- Какие семейства заполнены?
- Какие пусты?
```

### Добавление нового ядра

```
Создай новое ядро [C] для системы [название]:
1. Создай структуру папок
2. Создай README
3. Обнови our-systems-map.md
4. Обнови value-chain.md
```

---

## Часть 5: Примеры рассуждений (Chain-of-Thought)

> **Для AI:** Используй эти примеры как шаблоны рассуждения при работе с запросами.

### Пример 1: Куда положить документ про метрики?

**Запрос:** "Где описать метрики продукта?"

**Рассуждение:**

```
Шаг 1: Это система или эпистема?
→ "Метрики" — это область знания, НЕ система
→ Нет владельца, входов/выходов, границы
→ ВЫВОД: Это эпистема, НЕ создаём ядро

Шаг 2: О какой системе речь?
→ Метрики продукта → продукт = целевая система → Ядро A

Шаг 3: Какой уровень системы?
→ Метрики описывают саму целевую систему → X2 (SoI)

Шаг 4: Какая роль?
→ "Как работает?" (операционные показатели) → Operations (X.3)
→ Семейство: FA6

Шаг 5: Проверка по матрице 3×3
→ FA6 = "SLO / Incidents" — метрики сюда подходят ✓

РЕЗУЛЬТАТ: A2.{System-Name}/A2.3.Operations/metrics.md
```

### Пример 2: Нужно ли создавать ядро для маркетинга?

**Запрос:** "Создай ядро для маркетинга"

**Рассуждение:**

```
Шаг 1: Чеклист "Система или эпистема?"
- [ ] Есть владелец? → Возможно (маркетолог)
- [ ] Есть вход? → Неясно, что "принимает" маркетинг
- [ ] Есть выход? → Неясно, что "производит"
- [ ] Есть граница? → Размытая
- [ ] Есть цикл изменений? → Нет релизов

→ 4 из 5 пунктов не выполнены
→ ВЫВОД: "Маркетинг" — эпистема, НЕ система

Шаг 2: Где описывать маркетинг?
→ По матрице 3×3: X1 (Надсистема) + Meaning (.1) = FX1
→ FX1 = "Спрос / Оффер" — маркетинг сюда

Шаг 3: Если есть отдел маркетинга как команда?
→ Команда = система (есть владелец, входы, выходы)
→ Можно создать ядро для команды: C.Marketing-Team/
→ НО это ядро про команду, не про "маркетинг"

РЕЗУЛЬТАТ: Описать в A1.{Supra}/A1.1.Meaning/marketing-strategy.md
```

### Пример 3: Создание нового ядра для мобильного приложения

**Запрос:** "Добавь ядро для мобильного приложения"

**Рассуждение:**

```
Шаг 1: Чеклист "Система или эпистема?"
- [x] Есть владелец? → Да (команда разработки)
- [x] Есть вход? → Да (данные от API, действия пользователя)
- [x] Есть выход? → Да (UI, запросы к серверу)
- [x] Есть граница? → Да (только мобильный клиент)
- [x] Есть цикл изменений? → Да (версии, релизы)

→ 5 из 5 пунктов выполнены
→ ВЫВОД: Мобильное приложение — система, можно создать ядро

Шаг 2: Какая буква ядра?
→ A занято целевой системой
→ Следующая свободная: B

Шаг 3: Структура ядра
B.Mobile-App/
├── B1.{Надсистема}/ → B1.User-Device/ (смартфон пользователя)
├── B2.Mobile-App/   → Само приложение
└── B3.{Создатель}/  → B3.Mobile-Team/ (команда разработки)

Шаг 4: Обновить связи
→ 0.2.Kernels-Bridge/01-value-chain.md
→ 0.1.Knowledge-Logic/03-our-systems-map.md

РЕЗУЛЬТАТ: Создать структуру B.Mobile-App/ с X1/X2/X3
```

### Пример 4: Куда положить описание API?

**Запрос:** "Где описать API нашего бэкенда?"

**Рассуждение:**

```
Шаг 1: Это система или эпистема?
→ API — это интерфейс системы, часть её архитектуры
→ НЕ отдельная система, а описание системы

Шаг 2: О какой системе речь?
→ "Наш бэкенд" — наша система → ищем её ядро
→ Предположим, это Ядро C (Backend)

Шаг 3: Какой уровень системы?
→ API описывает саму систему → X2 (SoI)

Шаг 4: Какая роль?
→ "Как устроено?" (структура, интерфейсы) → Architecture (X.2)
→ Семейство: FC5

Шаг 5: Проверка по матрице 3×3
→ FC5 = "Архитектура / Интерфейсы" — API сюда подходит ✓

РЕЗУЛЬТАТ: C.Backend/C2.Backend/C2.2.Architecture/api-spec.md
```

---

## Часть 6: Чеклисты самопроверки

> **Для AI:** Выполняй эти проверки перед завершением задачи.

### Чеклист: Перед созданием ядра

```
□ Проверил по 5 критериям (владелец, вход, выход, граница, цикл)?
□ Это НЕ эпистема (экономика, маркетинг, метрики)?
□ Это НЕ процесс (процессы в F6/F9)?
□ Определена буква ядра (A, B, C...)?
□ Имя системы конкретное (НЕ "Target-System")?
□ X1 — физическая надсистема (НЕ "отрасль")?
□ X3 — создатель (НЕ "каталог подсистем")?
```

### Чеклист: Перед созданием документа

```
□ Определено ядро (A/B/C...)?
□ Определена система (X1/X2/X3)?
□ Определена роль (Meaning/Architecture/Operations)?
□ Семейство соответствует матрице 3×3?
□ Путь соответствует шаблону: X.Name/Xn.Name/Xn.m.Role/file.md?
□ Frontmatter заполнен (type, status, created, kernel, family)?
□ Имя файла в kebab-case?
```

### Чеклист: Перед размещением информации

```
□ Это НЕ дублирование существующего документа (SSOT)?
□ Информация относится к указанному ядру?
□ Информация относится к указанной роли?
□ Если эпистема → описал в разделе документа, НЕ в отдельном ядре?
□ Если подсистема → описал в FX5 родителя ИЛИ создал отдельное ядро?
```

### Чеклист: После изменений в структуре

```
□ Обновил 03-our-systems-map.md?
□ Обновил 01-value-chain.md?
□ Обновил 02-kernels-relations.md (если нужно)?
□ Обновил README.md ядра?
□ Проверил ссылки в связанных документах?
```

---

## Ссылки

### Ключевые документы

| Тема | Документ |
|------|----------|
| Модель ядер | [01-kernels-model.md](0.1.Knowledge-Logic/01-kernels-model.md) |
| Семейства F1-F9 | [02-document-families.md](0.1.Knowledge-Logic/02-document-families.md) |
| Карта систем | [03-our-systems-map.md](0.1.Knowledge-Logic/03-our-systems-map.md) |
| **Онтология** | [04-ontology.md](0.1.Knowledge-Logic/04-ontology.md) |
| **Глоссарий** | [05-glossary.md](0.1.Knowledge-Logic/05-glossary.md) |
| Именование | [07-naming.md](0.1.Knowledge-Logic/07-naming.md) |
| Анти-паттерны | [08-anti-patterns.md](0.1.Knowledge-Logic/08-anti-patterns.md) |
| **Библиотека примеров** | [09-examples-library.md](0.1.Knowledge-Logic/09-examples-library.md) |
| Цепочка ценности | [01-value-chain.md](0.2.Kernels-Bridge/01-value-chain.md) |
| Матрица ролей (полная) | [roles-matrix.md](0.3.Roles-Matrix-3x3/roles-matrix.md) |
| Матрица ролей (краткая) | [roles-matrix-brief.md](0.3.Roles-Matrix-3x3/roles-matrix-brief.md) |
| Интеграция с FPF | [fpf-integration.md](0.4.FPF-Integration/fpf-integration.md) |
