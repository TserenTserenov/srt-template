# Инструкции для Claude Code

Этот документ содержит руководство по работе с Claude Code в контексте SRD-метода и интеграции с First Principles Framework (FPF).

## Архитектура контекста

При каждом запросе Claude получает:
1. **Системный промпт** — базовые инструкции
2. **CLAUDE.md** (~2K токенов) — этот файл с терминологией и принципами
3. **История диалога** — предыдущие сообщения
4. **Текущий запрос** — задача пользователя

## Интеграция с FPF

### Что такое FPF?

**First Principles Framework** — это "операционная система для мышления", архитектура трансдисциплинарного рассуждения. FPF не методология, а **эпистема метода** — структурированная спецификация того, как думать.

### Ключевые концепции FPF

| Концепция | Паттерн | Описание |
|-----------|---------|----------|
| **Холонический фундамент** | A.1 | Всё — холон: одновременно целое и часть. Различаем Системы (физические) и Эпистемы (знания) |
| **Ограниченный контекст** | A.1.1 | Значение локально. Термин определён в границах контекста |
| **Строгое различение** | A.7 | Роль ≠ Метод ≠ Работа. Описание ≠ Объект |
| **F-G-R доверие** | B.3 | Доверие = (Формальность, Область применения, Надёжность) |
| **Цикл ADI** | B.5 | Абдукция → Дедукция → Индукция — канонический цикл рассуждения |
| **NQD-поиск** | C.18 | Новизна-Качество-Разнообразие — стратегия творческого поиска |

### Файлы FPF в репозитории

```
.fpf/
├── INDEX.md          # Индекс принципов проекта (~250 строк)
├── FPF-Spec.md       # Полная спецификация FPF (~43K строк, ~200K токенов)
└── FPF-Readme.md     # Обзор фреймворка
```

### Стратегия работы с FPF

**Для обычных задач:** Используй `.fpf/INDEX.md` — локальные принципы проекта

**Для глубокого анализа:** Запрашивай конкретные части `FPF-Spec.md`:
- Part A (A.1-A.21): Ядро архитектуры — холоны, роли, трансформеры
- Part B (B.1-B.5): Трансдисциплинарное рассуждение — агрегация, эволюция
- Part C: Доменные калькулюсы — Sys-CAL, KD-CAL, NQD-CAL
- Part E: Конституция и авторство паттернов
- Part F: Унификация — мосты, выравнивание терминологии
- Part G: SoTA-инструментарий — сбор передовых практик

### Навигационная карта FPF-Spec.md

| Часть | Строки | Тема |
|-------|--------|------|
| Preface | 1-500 | Введение, OS-метафора |
| Part A | 500-8000 | Kernel: Holon, Role, Transformer, Time |
| Part B | 8000-15000 | Trans-disciplinary: Γ-aggregation, Evolution, Trust |
| Part C | 15000-25000 | Calculi: Sys, KD, NQD, Kind, Method |
| Part D | 25000-28000 | Ethics & Conflict |
| Part E | 28000-33000 | Constitution & Authoring |
| Part F | 33000-38000 | Unification: SenseCells, Bridges |
| Part G | 38000-43000 | SoTA Kit: Harvesting, Portfolios |

## Структура SRD

### Матрица 4×3

```
                 Meaning          Architecture      Operations
                 (Смысл)          (Архитектура)     (Операции)
Management       Цели, миссия     Оргструктура      Процессы управл.
Supersystem      Контекст, рынок  Окружение         Взаимодействие
TargetSystem     Требования       Архитектура       Реализация
CreationSystem   Принципы разр.   Инструменты       Методология
```

### Навигация по папкам

| Система | Путь | Фокус |
|---------|------|-------|
| Management | `content/0.Management/` | Метасистема хранилища |
| Supersystem | `content/1.Supersystem/` | Внешняя среда |
| TargetSystem | `content/2.TargetSystem/` | Создаваемый продукт |
| CreationSystem | `content/3.CreationSystem/` | Процесс создания |

### Роли (измерения)

| Роль | Подпапка | Вопрос | FPF-связь |
|------|----------|--------|-----------|
| **Meaning** | `X.1.Meaning/` | Зачем? | U.RoleAssignment, цели |
| **Architecture** | `X.2.Architecture/` | Как устроено? | U.System, структура |
| **Operations** | `X.3.Operations/` | Как работает? | U.Work, процессы |

## Работа с документами

### Обязательные метаданные (YAML frontmatter)

```yaml
---
type: doc                        # doc, spec, process, report
status: active                   # stub, draft, active, archived
created: 2026-01-07
updated: 2026-01-07
system: "Management"             # Management/Supersystem/TargetSystem/CreationSystem
role: "Meaning"                  # Meaning/Architecture/Operations
layer: methodology               # methodology, architecture, operations
scope: local-edge                # local-edge, project, ecosystem
target_audience: [developers, managers]
related:
  - path/to/related/doc.md
fpf_principles:
  - minimalism
  - practicality
fpf_patterns:                    # Ссылки на паттерны FPF
  - A.1                          # Holonic Foundation
  - B.3                          # Trust Calculus
---
```

### Размещение документа

```
content/{N}.{System}/{N}.{M}.{Role}/document-name.md
```

Примеры:
- `content/0.Management/0.1.Meaning/project-vision.md`
- `content/2.TargetSystem/2.2.Architecture/api-schema.md`
- `content/3.CreationSystem/3.3.Operations/ci-cd-pipeline.md`

## Принципы работы Claude

### 1. Холонический подход (A.1)

- Рассматривай каждый документ как часть большей системы
- Указывай связи через `related` в frontmatter
- Поддерживай двунаправленность связей

### 2. Ограниченные контексты (A.1.1)

- Каждая папка — отдельный контекст со своей терминологией
- При переносе концепций между контекстами — явно указывай мосты
- Избегай глобального словаря — используй локальные определения

### 3. Строгое различение (A.7)

| Путаница | Правильно |
|----------|-----------|
| Документ "делает" | Система делает, документ описывает |
| Роль = Человек | Роль — функция, Человек — исполнитель |
| План = Реальность | План — WorkPlan, Реальность — Work |

### 4. Доверие как расчёт (B.3)

При оценке информации используй F-G-R:
- **F (Формальность):** Насколько строго описано? (0-9)
- **G (Область):** Где применимо? (локально/проект/экосистема)
- **R (Надёжность):** Насколько подтверждено? (0.0-1.0)

### 5. Инкрементальное развитие

- Маленькие изменения > большие рефакторинги
- Проверяй влияние на связанные документы
- Обновляй `updated` в frontmatter

## Команды для работы

### Анализ структуры

```
Проанализируй структуру SRD:
- Покажи заполненность матрицы
- Укажи отсутствующие документы
- Проверь связность
```

### Создание документа

```
Создай документ в [System]/[Role] на тему [Topic]
с применением FPF паттернов: [A.1, B.3]
```

### Проверка соответствия FPF

```
Проверь документ [path] на соответствие:
- Строгому различению (A.7)
- Холоническому принципу (A.1)
- Ограниченному контексту (A.1.1)
```

### Работа с FPF-Spec

```
Загрузи из FPF-Spec.md паттерн [A.15] и объясни его применение
```

```
Найди в FPF-Spec.md паттерны для [тема: trust, evidence, evolution]
```

## Лимиты контекста

| Модель | Лимит | FPF-Spec.md |
|--------|-------|-------------|
| Claude 3.5 | 200K токенов | Не вмещается целиком |
| Opus 4 | 200K токенов | Не вмещается целиком |

**Стратегия:** Загружай только нужные части FPF-Spec.md (строки X-Y) или используй INDEX.md для локальных принципов.

## Обратная связь

При работе Claude должен:
- Сообщать о найденных несоответствиях SRD/FPF
- Предлагать улучшения структуры
- Указывать на отсутствующие связи между документами
- Предлагать новые принципы для `.fpf/INDEX.md`

## Ссылки

- [README.md](README.md) — описание SRD-метода
- [CONTRIBUTING.md](CONTRIBUTING.md) — правила участия
- [.fpf/INDEX.md](.fpf/INDEX.md) — локальные принципы проекта
- [.fpf/FPF-Spec.md](.fpf/FPF-Spec.md) — полная спецификация FPF
- [.fpf/FPF-Readme.md](.fpf/FPF-Readme.md) — обзор FPF
